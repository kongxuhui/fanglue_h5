webpackJsonp([16],{Uk12:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("PBmY");var i=s("I4Nl"),a=s.n(i),n=s("a3Yh"),o=s.n(n),c=(s("DJE5"),s("3djZ")),r=s.n(c),l=s("w6Jx"),p=s("ok73"),d=s("Pp2j"),m=s("lkey"),u=s("xnKZ"),v=s("ZePI"),h=s("IfhF"),g={components:o()({appHeader:l.a,appFooter:p.a,appIcon:d.a,appButton:m.a,formItem:v.a,appCell:u.a},r.a.name,r.a),mixins:[h.b],data:function(){return{name:"",date:"",title:"",btn:"",pickerVisible:!1,contactsTel:"",startPoint:"",endPoint:"",type:"",weight:"",volume:"",contacts:"",step:1,rules:{startPoint:[{required:!0,message:"请输入发货地"}],endPoint:[{required:!0,message:"请输入收货地"}],name:[{required:!0,message:"请输入货物名"}],date:[{required:!0,message:"请输入发货时间"}],weight:[{required:!0,message:"请输入货物重量"}],contacts:[{required:!0,message:"请输入联系人"}]}}},created:function(){this.type=this.$route.query.type,"query"===this.type?(this.title="运价查询",this.btn="发布运价查询"):(this.title="我要托运",this.btn="发布托运需求"),this.userId=this.$store.state.user.userInfo.userId;var t=this.$store.state.consign.consignInfo;t&&t.type===this.type&&(this.startPoint=t.fromPlace,this.endPoint=t.toPlace,this.name=t.productsName,this.weight=t.productsWeight,this.volume=t.productsVolume,this.date=t.sendDateStr,this.contacts=t.contacts,this.contactsTel=t.contactTel)},methods:{openPicker:function(){this.$refs.picker.open()},handleConfirm:function(t){var e=t.getMonth()+1,s=t.getDate();e<10&&(e="0"+e),s<10&&(s="0"+s),this.date=t.getFullYear()+"-"+e+"-"+s},handleClick:function(){var t=this;this.validate()&&(/^((\d{3,4}\-?\d{7,8})|(1[3584]\d{9}))$/.test(this.contactsTel)?this.userId?this.$http.post({transCode:"TCSA01",type:"add",applyUserId:this.userId,custName:this.$store.state.user.userInfo.userName,fromPlace:this.startPoint,toPlace:this.endPoint,productsName:this.name,productsWeight:this.weight,productsVolume:this.volume,sendDateStr:this.date,contacts:this.contacts,contactTel:this.contactsTel,sourceType:"query"===this.type?1:2,bizInfoId:this.$store.state.user.userInfo.employee&&this.$store.state.user.userInfo.employee.ownedMerchant||""}).then(function(e){"000000"===e.code?(t.step=2,t.$store.commit("setConsignInfo",null)):a()(e.message)}):(this.$store.commit("setConsignInfo",{fromPlace:this.startPoint,toPlace:this.endPoint,productsName:this.name,productsWeight:this.weight,productsVolume:this.volume,sendDateStr:this.date,contacts:this.contacts,contactTel:this.contactsTel,type:this.type}),this.$router.push({name:"login",query:{redirect:this.$route.fullPath}})):a()("请输入正确的联系电话"))},handleBack:function(){this.$router.push("home")},intoView:function(t){window.addEventListener("resize",function(){t.target.scrollIntoView()})}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("app-header",{attrs:{title:t.title}}),t._v(" "),s("div",{staticClass:"main"},[1===t.step?s("div",[s("div",{staticClass:"consign-address"},[s("app-icon",{staticClass:"icon-send",staticStyle:{color:"#fff"}}),t._v(" "),s("div",{staticClass:"consign-address-item"},[s("app-icon",{staticClass:"icon-qidian",staticStyle:{color:"#09BAB4","font-size":"30px","line-height":"30px"}}),t._v(" "),s("form-item",{staticClass:"item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.startPoint,expression:"startPoint"}],attrs:{type:"text",placeholder:"请输入发货地"},domProps:{value:t.startPoint},on:{input:function(e){e.target.composing||(t.startPoint=e.target.value)}}})])],1),t._v(" "),s("div",{staticClass:"consign-address-item"},[s("app-icon",{staticClass:"icon-zhongdian",staticStyle:{color:"#F0A308","font-size":"30px","line-height":"30px"}}),t._v(" "),s("form-item",{staticClass:"item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.endPoint,expression:"endPoint"}],attrs:{type:"text",placeholder:"请输入收货地"},domProps:{value:t.endPoint},on:{input:function(e){e.target.composing||(t.endPoint=e.target.value)}}})])],1)],1),t._v(" "),s("div",{staticClass:"consign-box"},[s("form-item",{staticClass:"item"},[s("app-icon",{staticClass:"icon-cube",attrs:{size:"large",type:"selected"}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"请输入货物名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})],1),t._v(" "),s("form-item",{staticClass:"item"},[s("app-icon",{staticClass:"icon-clock",attrs:{size:"large",type:"selected"}}),t._v(" "),s("div",{staticStyle:{padding:"0 10px"},style:{color:t.date?"inherit":"#d9d7d9"},on:{click:t.openPicker}},[t._v(t._s(t.date||"请输入发货时间"))])],1)],1),t._v(" "),s("div",{staticClass:"consign-box"},[s("div",{staticClass:"item"},[s("div",{staticClass:"name"},[t._v("货物重量")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.weight,expression:"weight"}],staticClass:"consign-box-input",attrs:{type:"number"},domProps:{value:t.weight},on:{input:function(e){e.target.composing||(t.weight=e.target.value)}}}),t._v(" "),s("span",[t._v("吨")])]),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"name"},[t._v("货物体积")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.volume,expression:"volume"}],staticClass:"consign-box-input",attrs:{type:"number"},domProps:{value:t.volume},on:{input:function(e){e.target.composing||(t.volume=e.target.value)}}}),t._v(" "),s("span",[t._v("m³")])])]),t._v(" "),s("div",{staticClass:"bg-white",staticStyle:{padding:"10px"}},[s("form-item",{staticClass:"item"},[s("label",[t._v("联系人")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.contacts,expression:"contacts"}],attrs:{type:"text",placeholder:"请输入联系人"},domProps:{value:t.contacts},on:{input:function(e){e.target.composing||(t.contacts=e.target.value)}}})]),t._v(" "),s("form-item",{staticClass:"item"},[s("label",[t._v("联系电话")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.contactsTel,expression:"contactsTel"}],attrs:{type:"number",placeholder:"请输入联系电话"},domProps:{value:t.contactsTel},on:{focus:t.intoView,input:function(e){e.target.composing||(t.contactsTel=e.target.value)}}})])],1)]):s("div",{staticClass:"bg-white",staticStyle:{padding:"30px 0"}},[s("div",{staticClass:"form"},[s("app-cell",{attrs:{justify:"center"}},[s("app-icon",{staticClass:"icon-info",staticStyle:{"margin-right":"3px","font-size":"40px"},attrs:{type:"selected"}}),t._v(" "),s("div",[t._v("您的资料已提交成功")])],1),t._v(" "),s("div",{staticClass:"gray"},[t._v("* 资料提交后将会有专业业务人员和您联系，请您耐心等待。")]),t._v(" "),s("app-button",{staticStyle:{"margin-top":"30px"},on:{click:function(e){t.handleBack()}}},[t._v("返回首页")])],1)]),t._v(" "),s("mt-datetime-picker",{ref:"picker",attrs:{type:"date",startDate:new Date,"year-format":"{value} 年","month-format":"{value} 月","date-format":"{value} 日"},on:{confirm:t.handleConfirm},model:{value:t.pickerVisible,callback:function(e){t.pickerVisible=e},expression:"pickerVisible"}})],1),t._v(" "),1===t.step?s("app-button",{attrs:{type:"primary",bottom:""},on:{click:t.handleClick}},[t._v(t._s(t.btn))]):t._e()],1)},staticRenderFns:[]};var y=s("Z0/y")(g,f,!1,function(t){s("m9Ki")},"data-v-a28d7f8a",null);e.default=y.exports},m9Ki:function(t,e){}});
//# sourceMappingURL=16.09fbbc3a819a80b56637.js.map