webpackJsonp([30],{gcW1:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s("miO0");var a=s("OTYB"),i=s.n(a),n=(s("PBmY"),s("I4Nl")),p=s.n(n),o=s("w6Jx"),c=s("5HKF"),r=s("lkey"),l=s("1M7o"),d=s("ZePI"),u=s("Pp2j"),h=s("xnKZ"),m=s("IfhF"),v=s("hgLE"),w={components:{appHeader:o.a,appLogo:c.a,appButton:r.a,appCaptcha:l.a,formItem:d.a,appIcon:u.a,appCell:h.a},mixins:[m.b,m.a],data:function(){return{step:1,pwd:"",pwd2:"",rules:{mobile:[{required:!0,message:"请输入正确的手机号",type:"mobile"}],captcha:[{required:!0,message:"请输入正确的验证码",type:"string",length:6}]},stepRules:{pwd:[{required:!0,message:"请输入正确格式密码",type:"password"}],pwd2:[{required:!0,message:"两次密码输入不一致",type:"recheck",name:"pwd"}]}}},methods:{handleClick:function(e){var t=this;1===e?this.validate()&&this.checkCaptcha().then(function(e){"000000"===e.code?t.step=2:p()(e.message)}):2===e?this.validate(this.stepRules)&&this.$http.post({userId:this.userId,transCode:"MUSR06",loginPwd:this.pwd,type:"updatePwd",phone:this.mobile}).then(function(e){"000000"===e.code?t.step=3:p()(e.message)}):this.$router.push("login")},send:function(){var e=this;Object(v.b)(this.mobile,!0,!1).then(function(t){"000000"===t.code?(e.userId=t.user.userId,e.$refs.captcha.sendCaptcha()):(i.a.close(),p()("该用户不存在"))})},intoView:function(e){window.addEventListener("resize",function(){e.target.scrollIntoView()})},back:function(){1==this.step?this.$router.go(-1):2==this.step?this.step=1:this.$router.push("login")}}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("app-header",{attrs:{title:"忘记密码"}},[s("app-icon",{attrs:{slot:"left",type:"icon-back"},nativeOn:{click:function(t){return e.back(t)}},slot:"left"})],1),e._v(" "),s("div",{staticClass:"main bg-white"},[3!==e.step?s("app-logo"):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.step,expression:"step === 1"}],staticClass:"form"},[s("app-captcha",{ref:"captcha",attrs:{preAction:""},on:{updateMobile:function(t){return e.mobile=t},updateCaptcha:function(t){return e.captcha=t},send:e.send}}),e._v(" "),s("app-button",{staticStyle:{"margin-top":"30px"},on:{click:function(t){e.handleClick(1)}}},[e._v("下一步")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2===e.step,expression:"step === 2"}],staticClass:"form"},[s("form-item",[s("app-icon",{staticClass:"icon-unlock",attrs:{type:"selected",size:"large"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd,expression:"pwd"}],attrs:{type:"password",placeholder:"请输入密码,密码为6-20个字符"},domProps:{value:e.pwd},on:{input:function(t){t.target.composing||(e.pwd=t.target.value)}}})],1),e._v(" "),s("form-item",[s("app-icon",{staticClass:"icon-unlock",attrs:{type:"selected",size:"large"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.pwd2,expression:"pwd2"}],attrs:{type:"password",placeholder:"请确认密码"},domProps:{value:e.pwd2},on:{input:function(t){t.target.composing||(e.pwd2=t.target.value)}}})],1),e._v(" "),s("app-button",{staticStyle:{"margin-top":"30px"},on:{click:function(t){e.handleClick(2)}}},[e._v("重置密码完成")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:3===e.step,expression:"step === 3"}],staticClass:"form"},[s("app-cell",{staticStyle:{"margin-top":"30px"},attrs:{justify:"center"}},[s("app-icon",{staticClass:"icon-success",staticStyle:{"margin-right":"3px"},attrs:{type:"success",size:"large"}}),e._v(" "),s("div",[e._v("恭喜您密码重置成功")])],1),e._v(" "),s("app-button",{staticStyle:{"margin-top":"30px"},on:{click:function(t){e.handleClick(3)}}},[e._v("立即登录")])],1)],1)],1)},staticRenderFns:[]},g=s("Z0/y")(w,f,!1,null,null,null);t.default=g.exports}});
//# sourceMappingURL=30.8a09d74f47a9b1b60ab2.js.map